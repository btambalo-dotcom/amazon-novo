{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center">
  <h1>Calendário</h1>
  <a class="btn btn-primary" href="{{ url_for('rides.nova') }}">Nova corrida</a>
</div>
<div class="table-responsive mt-3">
<table class="table table-bordered align-middle text-center">
  <thead class="table-secondary">
    <tr>
      <th>Seg</th><th>Ter</th><th>Qua</th><th>Qui</th><th>Sex</th><th>Sáb</th><th>Dom</th>
    </tr>
  </thead>
  <tbody>
  {% for week in weeks %}
    <tr>
      {% for cell in week %}
        {% set d = cell.date %}
        <td class="text-start" style="min-width: 200px; vertical-align: top;">
          <div class="small fw-bold {{ 'text-muted' if d.month != first.month else '' }}">{{ d.day }}/{{ '%02d' % d.month }}</div>
          {% for r in cell.rides %}
            <div class="mt-1 p-1 border rounded bg-white small">
              <a href="{{ url_for('rides.view', ride_id=r.id) }}" class="text-decoration-none">{{ r.titulo or 'Corrida' }}</a>
              <div>{{ r.inicio.strftime('%H:%M') }}–{{ r.fim.strftime('%H:%M') }}</div>
              <div>${{ '%.2f'|format(r.valor + r.gorjeta) }}</div>
            </div>
          {% endfor %}
        </td>
      {% endfor %}
    </tr>
  {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
